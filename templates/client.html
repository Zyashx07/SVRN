<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SVRN Client Panel</title>
<style>
  body { font-family: Poppins, sans-serif; background: #f4f6ff; padding: 20px; }
  .card { background: white; padding: 20px; border-radius: 16px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); max-width: 500px; margin: auto; }
  input, select, button { padding: 10px; border-radius: 10px; border: 1px solid #ccc; margin-top: 8px; width: 100%; }
  button { background: #0078ff; color: white; font-weight: bold; cursor: pointer; }
  #log { background: #eee; padding: 10px; border-radius: 10px; margin-top: 15px; max-height: 200px; overflow-y: auto; }
</style>
</head>
<body>
<div class="card">
  <h2>üì° SVRN Client Panel</h2>
  <label>Device ID:</label>
  <input id="deviceId" placeholder="Enter your device ID">
  <label>Message:</label>
  <input id="textMessage" placeholder="Type your message">
  <label>Priority:</label>
  <select id="priority">
    <option value="1">Normal</option>
    <option value="2">High</option>
    <option value="3">SOS</option>
  </select>
  <button onclick="sendMessage()">Send Message</button>
  <div id="log"></div>
</div>

<script>
const BASE_URL = "https://svrn.onrender.com";  // üëà replace with your host's IP

function log(msg) {
  const logBox = document.getElementById("log");
  logBox.innerHTML += `[${new Date().toLocaleTimeString()}] ${msg}<br>`;
  logBox.scrollTop = logBox.scrollHeight;
}

async function sendMessage() {
  const text = document.getElementById("textMessage").value;
  const priority = parseInt(document.getElementById("priority").value);
  const device = document.getElementById("deviceId").value.trim() || "client-unknown";

  if (!text) return log("‚ö†Ô∏è Message is empty");

  const body = {
    text: `[${device}] ${text}`,
    priority: priority,
    passphrase: "default",
	//sender_id = data.get('device_id', request.remote_addr)
	sender_id:deviceId
  };

  try {
    const res = await fetch(`${BASE_URL}/api/send_text`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(body)
    });
    if (res.ok) log("‚úÖ Message sent to host server");
    else log("‚ùå Failed to send message");
  } catch (err) {
    log("‚ö†Ô∏è Host unreachable");
  }
}
</script>
</body>
</html>
